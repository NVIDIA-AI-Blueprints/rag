

# Ingestor Server
ingestor-server:
  envVars:
    NV_INGEST_FILES_PER_BATCH: "4"
    NV_INGEST_CONCURRENT_BATCHES: "1"

# NV-Ingest NIMs
nv-ingest:
  envVars:
    NV_INGEST_MAX_UTIL: 8
    MAX_INGEST_PROCESS_WORKERS: 2

  # Milvus
  milvus:
    standalone:
      resources:
        limits:
          nvidia.com/gpu: "0"
          nvidia.com/mig-1g.10gb: 1
        requests:
          nvidia.com/gpu: "0"
          nvidia.com/mig-1g.10gb: 1

  # NIM Operator overrides for nv-ingest NIMs (from NV-Ingest team)
  nimOperator:
    # Page Elements - uses 1g.10gb
    page_elements:
      resources:
        limits:
          nvidia.com/gpu: "0"
          nvidia.com/mig-1g.10gb: 1
        requests:
          nvidia.com/gpu: "0"
          nvidia.com/mig-1g.10gb: 1

    # Graphic Elements - uses 1g.10gb
    graphic_elements:
      resources:
        limits:
          nvidia.com/gpu: "0"
          nvidia.com/mig-1g.10gb: 1
        requests:
          nvidia.com/gpu: "0"
          nvidia.com/mig-1g.10gb: 1

    # Table Structure - uses 1g.10gb
    table_structure:
      resources:
        limits:
          nvidia.com/gpu: "0"
          nvidia.com/mig-1g.10gb: 1
        requests:
          nvidia.com/gpu: "0"
          nvidia.com/mig-1g.10gb: 1

    # OCR - uses 3g.40gb (LARGER slice for better compatibility!)
    nemoretriever_ocr_v1:
      resources:
        limits:
          nvidia.com/gpu: "0"
          nvidia.com/mig-3g.40gb: 1
        requests:
          nvidia.com/gpu: "0"
          nvidia.com/mig-3g.40gb: 1
# NIM Operator overrides for MIG (main NIMs)
nimOperator:
  # LLM - uses 7g.80gb
  nim-llm:
    resources:
      limits:
        nvidia.com/gpu: "0"
        nvidia.com/mig-7g.80gb: 1
      requests:
        nvidia.com/gpu: "0"
        nvidia.com/mig-7g.80gb: 1

  # Embedding - uses 1g.10gb
  nvidia-nim-llama-32-nv-embedqa-1b-v2:
    resources:
      limits:
        nvidia.com/gpu: "0"
        nvidia.com/mig-1g.10gb: 1
      requests:
        nvidia.com/gpu: "0"
        nvidia.com/mig-1g.10gb: 1

  # Reranking - uses 1g.20gb
  nvidia-nim-llama-32-nv-rerankqa-1b-v2:
    resources:
      limits:
        nvidia.com/gpu: "0"
        nvidia.com/mig-1g.20gb: 1
      requests:
        nvidia.com/gpu: "0"
        nvidia.com/mig-1g.20gb: 1
